[debug] [2019-07-20T20:14:06.812Z] ----------------------------------------------------------------------
[debug] [2019-07-20T20:14:06.813Z] Command:       /usr/local/bin/node /Users/westonharper/.npm-global/bin/firebase deploy --only functions
[debug] [2019-07-20T20:14:06.814Z] CLI Version:   7.1.1
[debug] [2019-07-20T20:14:06.814Z] Platform:      darwin
[debug] [2019-07-20T20:14:06.814Z] Node Version:  v10.15.0
[debug] [2019-07-20T20:14:06.815Z] Time:          Sat Jul 20 2019 14:14:06 GMT-0600 (Mountain Daylight Time)
[debug] [2019-07-20T20:14:06.815Z] ----------------------------------------------------------------------
[debug] 
[debug] [2019-07-20T20:14:06.821Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2019-07-20T20:14:06.821Z] > authorizing via signed-in user
[debug] [2019-07-20T20:14:06.821Z] [iam] checking project snuze-stage for permissions ["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]
[debug] [2019-07-20T20:14:06.823Z] >>> HTTP REQUEST POST https://cloudresourcemanager.googleapis.com/v1/projects/snuze-stage:testIamPermissions  

[debug] [2019-07-20T20:14:07.056Z] <<< HTTP RESPONSE 200
[info] 
[info] === Deploying to 'snuze-stage'...
[info] 
[info] i  deploying functions
[info] Running command: npm --prefix "$RESOURCE_DIR" run lint
[info] Running command: npm --prefix "$RESOURCE_DIR" run build
[info] ✔  functions: Finished running predeploy script.
[debug] [2019-07-20T20:14:12.894Z] > [functions] package.json contents: {
  "name": "functions",
  "scripts": {
    "lint": "tslint --project tsconfig.json",
    "build": "tsc",
    "serve": "npm run build && firebase serve --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "8"
  },
  "main": "lib/index.js",
  "dependencies": {
    "dotenv": "^8.0.0",
    "firebase-admin": "^8.0.0",
    "firebase-functions": "^3.0.0",
    "stripe": "^7.4.0"
  },
  "devDependencies": {
    "@types/dotenv": "^6.1.1",
    "@types/stripe-v3": "^3.1.5",
    "tslint": "^5.12.0",
    "typescript": "^3.2.2"
  },
  "private": true
}
[info] i  functions: ensuring necessary APIs are enabled...
[debug] [2019-07-20T20:14:12.895Z] >>> HTTP REQUEST GET https://serviceusage.googleapis.com/v1/projects/snuze-stage/services/cloudfunctions.googleapis.com  
 
[debug] [2019-07-20T20:14:12.896Z] >>> HTTP REQUEST GET https://serviceusage.googleapis.com/v1/projects/snuze-stage/services/runtimeconfig.googleapis.com  
 
[debug] [2019-07-20T20:14:13.157Z] <<< HTTP RESPONSE 200
[debug] [2019-07-20T20:14:13.159Z] <<< HTTP RESPONSE 200
[info] ✔  functions: all necessary APIs are enabled
[debug] [2019-07-20T20:14:13.160Z] >>> HTTP REQUEST GET https://firebase.googleapis.com/v1beta1/projects/snuze-stage/adminSdkConfig  
 
[debug] [2019-07-20T20:14:13.290Z] <<< HTTP RESPONSE 200
[info] i  functions: preparing functions directory for uploading...
[debug] [2019-07-20T20:14:13.292Z] >>> HTTP REQUEST GET https://runtimeconfig.googleapis.com/v1beta1/projects/snuze-stage/configs  
 
[debug] [2019-07-20T20:14:13.737Z] <<< HTTP RESPONSE 200
[info] i  functions: packaged functions (33.76 KB) for uploading
[debug] [2019-07-20T20:14:13.984Z] >>> HTTP REQUEST POST https://cloudfunctions.googleapis.com/v1/projects/snuze-stage/locations/us-central1/functions:generateUploadUrl  
 
[debug] [2019-07-20T20:14:14.271Z] <<< HTTP RESPONSE 200
[debug] [2019-07-20T20:14:14.272Z] >>> HTTP REQUEST PUT https://storage.googleapis.com/gcf-upload-us-central1-f2c092ad-c6a0-4526-a18f-ce3723932bda/aec65050-043f-4172-98d8-406e83eb7079.zip?GoogleAccessId=service-470335422668@gcf-admin-robot.iam.gserviceaccount.com&Expires=1563655454&Signature=RnnfMuadb%2FEQM5fuYz9WOmHvnmMi9xXdFhB%2B2Qa%2BniiO6np0iQGLRzYsWhKVpnEfznAAnrFqxuREA%2Bu%2BVSZUWkq3ZFQ84uvPeUjeOh4paVWQF235IbTTlrkAtpjfvLBU0VvYsJNES2AX1nB%2FlM1coKYRHapUlyeNKdXz1VoOg8t%2BgzMnsPEarfuLp5AajYEg5FRCVca2chXOFYY55%2BrDgdRL%2FYRQBzzmKc1sWCpJt5I9yuvXUI9v3IFSBk6hClisX4SIdHILSTnjU%2FeTdx91AA5S8%2BrGfx33uQ6aE%2FsDzDkEEFjpY8F0nft8M5psxiuMW%2B5tyXpLxy1XPy6hgki12w%3D%3D  
 <request body omitted>
[debug] [2019-07-20T20:14:14.527Z] <<< HTTP RESPONSE 200
[info] ✔  functions: functions folder uploaded successfully
[debug] [2019-07-20T20:14:14.530Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/projects/snuze-stage/locations/-/functions  
 
[debug] [2019-07-20T20:14:14.826Z] <<< HTTP RESPONSE 200
[info] i  functions: updating Node.js 8 function createStripeUser(us-central1)...
[debug] [2019-07-20T20:14:14.829Z] Trigger is:  {"httpsTrigger":{}}
[info] i  functions: updating Node.js 8 function createSetupIntent(us-central1)...
[debug] [2019-07-20T20:14:14.830Z] Trigger is:  {"httpsTrigger":{}}
[debug] [2019-07-20T20:14:14.831Z] >>> HTTP REQUEST GET https://serviceusage.googleapis.com/v1/projects/snuze-stage/services/cloudscheduler.googleapis.com  
 
[debug] [2019-07-20T20:14:15.093Z] <<< HTTP RESPONSE 200
[debug] [2019-07-20T20:14:15.095Z] >>> HTTP REQUEST PATCH https://cloudfunctions.googleapis.com/v1/projects/snuze-stage/locations/us-central1/functions/createStripeUser {"updateMask":"sourceUploadUrl,name,labels,runtime,httpsTrigger"} 

[debug] [2019-07-20T20:14:15.096Z] >>> HTTP REQUEST PATCH https://cloudfunctions.googleapis.com/v1/projects/snuze-stage/locations/us-central1/functions/createSetupIntent {"updateMask":"sourceUploadUrl,name,labels,runtime,httpsTrigger"} 

